<scriptedContentFragments><scriptedContentFragment name="MediaGalleryCommentList-Widget-v7" version="7.0.0.28679" description="${resource:MediaGalleries_MediaGalleryPostCommentList_Description}" instanceIdentifier="ab569148279a408cac4eed0c676a037f" theme="" isCacheable="true" varyCacheByUser="true" showHeaderByDefault="false" cssClass="media-gallery-post-comment-list"><contentScript>#set ($galleryId = false)
#set ($galleryId = $core_v2_gallery.Current.Id)
#set ($mediaId = false)
#set ($mediaId = $core_v2_media.Current.Id)

#if (!$galleryId || !$mediaId)
	$core_v2_widget.Hide()
#end

#set ($mediaAuthorId = $core_v2_media.Current.Author.Id)

$core_v2_ui.PagedContent('load.vm')

#registerEndOfPageHtml('telligent.evolution.widgets.mediaGalleryPostCommentList')
	&lt;script type="text/javascript" src="$core_v2_encoding.HtmlAttributeEncode($core_v2_widget.GetFileUrl('ui.js'))"&gt;&lt;/script&gt;
#end

#registerEndOfPageHtml()
	&lt;script type="text/javascript"&gt;
	//&lt;![CDATA[
	jQuery(document).ready(function()
	{
		jQuery.telligent.evolution.widgets.mediaGalleryPostCommentList.register({
			wrapper:jQuery('#$core_v2_ui.PagedContentWrapperElementId'),
			errorText:'$core_v2_encoding.JavascriptEncode($core_v2_language.GetResource('MediaGalleries_MediaGalleryPostCommentList_Error'))',
			loadingText:'$core_v2_encoding.JavascriptEncode($core_v2_language.GetResource('MediaGalleries_MediaGalleryPostCommentList_Loading'))',
			loadCommentsUrl:'$core_v2_encoding.JavascriptEncode($core_v2_widget.GetExecutedFileUrl('load.vm'))',
			deleteVerificationText:'$core_v2_encoding.JavascriptEncode($core_v2_language.GetResource("MediaGalleries_MediaGalleryPostCommentList_DeleteConfirmation"))',
			baseUrl:'$core_v2_encoding.JavascriptEncode($core_v2_page.Url)',
			galleryId: $galleryId,
			fileId: $mediaId,
			pagedMessage: '$core_v2_encoding.JavascriptEncode($core_v2_ui.PagedContentPagedEvent)',
			pageIndexQueryStringKey: '$core_v2_encoding.JavascriptEncode($core_v2_ui.PageIndexQueryStringKey)'
		});
	});
	//]]&gt;
	&lt;/script&gt;
#end</contentScript><headerScript>$core_v2_widget.ApplyTokens($core_v2_widget.GetStringValue('fragmentHeader', '${resource:MediaGalleries_MediaGalleryPostCommentList_Name}'))</headerScript><configuration>&lt;propertyGroup id="linkArea" resourceName="Options"&gt;
	&lt;property id="fragmentHeader" resourceName="CF_Title" dataType="string" defaultValue="${resource:MediaGalleries_MediaGalleryPostCommentList_Name}" controlType="Telligent.Evolution.Controls.ContentFragmentTokenStringControl, Telligent.Evolution.Extensions.SitecoreConnect" /&gt;
	&lt;property id="pageSize" resourceName="CF_Comment_PageSize" dataType="int" defaultValue="15"&gt;
		&lt;propertyRule type="Telligent.Evolution.Controls.PropertyRules.MinMaxValueRule, Telligent.Evolution.Extensions.SitecoreConnect" minValue="1" maxValue="100" /&gt;
	&lt;/property&gt;
&lt;/propertyGroup&gt;</configuration><languageResources><language key="en-us"><resource name="MediaGalleries_MediaGalleryPostCommentList_Name">Media Gallery - Comment List</resource><resource name="MediaGalleries_MediaGalleryPostCommentList_Description">Displays comments on a media gallery file.</resource><resource name="Options">Options</resource><resource name="CF_Title">Widget Title</resource><resource name="CF_Comment_PageSize">Number of comments to display per page</resource><resource name="MediaGalleries_MediaGalleryPostCommentList_Error">Error retrieving comments.</resource><resource name="MediaGalleries_MediaGalleryPostCommentList_Loading">Loading...</resource><resource name="MediaGalleries_MediaGalleryPostCommentList_DeleteConfirmation">Are you sure you want to delete this comment?</resource><resource name="Comments">Comments</resource><resource name="Delete">Delete</resource></language></languageResources><requiredContext><context id="a91f97494d81449ca3c3ec8d6eebaf25" /></requiredContext><files><file name="load.vm">I3NldCAoJHBhZ2VTaXplID0gJGNvcmVfdjJfd2lkZ2V0LkdldEludFZhbHVlKCdwYWdlU2l6ZScsIDE1KSkNCiNzZXQgKCRwYWdlSW5kZXggPSAkY29yZV92Ml91aS5HZXRDdXJyZW50UGFnZUluZGV4KCkpDQojc2V0ICgkZ2FsbGVyeUlkID0gJGNvcmVfdjJfZ2FsbGVyeS5DdXJyZW50LklkKQ0KI3NldCAoJG1lZGlhSWQgPSAkY29yZV92Ml9tZWRpYS5DdXJyZW50LklkKQ0KI3NldCAoJG1lZGlhQXV0aG9ySWQgPSAkY29yZV92Ml9tZWRpYS5DdXJyZW50LkF1dGhvci5JZCkNCiNzZXQgKCRjb21tZW50cyA9ICRjb3JlX3YyX21lZGlhQ29tbWVudC5MaXN0KCRtZWRpYUlkLCAiJXtQYWdlU2l6ZT0kcGFnZVNpemUsUGFnZUluZGV4PSRwYWdlSW5kZXh9IikpDQojc2V0ICgkYWNjZXNzaW5nVXNlcklzUmVnaXN0ZXJlZCA9ICRjb3JlX3YyX3VzZXIuSXNSZWdpc3RlcmVkKCRjb3JlX3YyX3VzZXIuQWNjZXNzaW5nLklkKSkNCg0KI2ZvcmVhY2goJGNvbW1lbnQgaW4gJGNvbW1lbnRzKQ0KI2JlZm9yZWFsbA0KCTxhIG5hbWU9ImNvbW1lbnRzIj48L2E+DQoJPGRpdiBjbGFzcz0iY29udGVudC1saXN0LWhlYWRlciI+PC9kaXY+DQoJPGRpdiBjbGFzcz0iY29udGVudC1saXN0LW5hbWUiPiRjb3JlX3YyX2xhbmd1YWdlLkdldFJlc291cmNlKCJDb21tZW50cyIpPC9kaXY+DQoJPHVsIGNsYXNzPSJjb250ZW50LWxpc3QiPg0KI2VhY2gNCgkjc2V0KCRJc0Fub255bW91cyA9IHRydWUpDQoJI3NldCgkSXNBbm9ueW1vdXMgPSAhJGNvcmVfdjJfVXNlci5Jc1JlZ2lzdGVyZWQoJGNvbW1lbnQuQXV0aG9yLklkKSkNCgkjaWYgKCRtZWRpYUF1dGhvcklkID09ICRjb21tZW50LkF1dGhvci5JZCkNCgkJPGxpIGNsYXNzPSJjb250ZW50LWl0ZW0gdXNlci1pcy1hdXRob3IiIGRhdGEtY29tbWVudGlkPSIkY29tbWVudC5JZCI+DQoJCQk8ZGl2IGNsYXNzPSJmdWxsLXBvc3Qtb3V0ZXIgZmlqaS1mdWxsLXBvc3Qtb3V0ZXIgZXZvbHV0aW9uMi1mdWxsLXBvc3Qtb3V0ZXIiPg0KCQkJPGRpdiBjbGFzcz0iZnVsbC1wb3N0LWhlYWRlciB1c2VyLWlzLWF1dGhvciI+DQoJCQkJPGRpdiBjbGFzcz0iciBmaWppLXIgZXZvbHV0aW9uMi1yIj48L2Rpdj4NCgkJCTwvZGl2Pg0KCQkJPGRpdiBjbGFzcz0iZnVsbC1wb3N0IHVzZXItaXMtYXV0aG9yIj4NCgkjZWxzZQ0KCQk8bGkgY2xhc3M9ImNvbnRlbnQtaXRlbSIgZGF0YS1jb21tZW50aWQ9IiRjb21tZW50LklkIj4NCgkJCTxkaXYgY2xhc3M9ImZ1bGwtcG9zdC1vdXRlciBmaWppLWZ1bGwtcG9zdC1vdXRlciBldm9sdXRpb24yLWZ1bGwtcG9zdC1vdXRlciI+DQoJCQk8ZGl2IGNsYXNzPSJmdWxsLXBvc3QtaGVhZGVyIj4NCgkJCQk8ZGl2IGNsYXNzPSJyIGZpamktciBldm9sdXRpb24yLXIiPjwvZGl2Pg0KCQkJPC9kaXY+DQoJCQk8ZGl2IGNsYXNzPSJmdWxsLXBvc3QiPg0KCSNlbmQNCgkJCTxkaXYgY2xhc3M9ImZ1bGwtcG9zdC1pbm5lciBmaWppLWZ1bGwtcG9zdC1pbm5lciBldm9sdXRpb24yLWZ1bGwtcG9zdC1pbm5lciI+DQoJCQkJPGEgbmFtZT0iY29tbWVudC0kY29tbWVudC5JZCI+PC9hPg0KCQkJCTxoMyBjbGFzcz0icG9zdC1uYW1lIj4kY29tbWVudC5TdWJqZWN0PC9oMz4NCgkJCQk8ZGl2IGNsYXNzPSJwb3N0LWF1dGhvciI+DQoJCQkJCTxzcGFuIGNsYXNzPSJhdmF0YXIiPg0KCQkJCQkJI2lmICgkY29tbWVudC5BdXRob3IuUHJvZmlsZVVybCkNCgkJCQkJCQk8YSBocmVmPSIkY29yZV92Ml9lbmNvZGluZy5IdG1sQXR0cmlidXRlRW5jb2RlKCRjb21tZW50LkF1dGhvci5Qcm9maWxlVXJsKSI+DQoJCQkJCQkJCSRjb3JlX3YyX3VpLkdldFJlc2l6ZWRJbWFnZUh0bWwoJGNvbW1lbnQuQXV0aG9yLkF2YXRhclVybCwgMzIsIDMyLCAiJXtib3JkZXI9JzAnLCBhbHQ9JGNvbW1lbnQuQXV0aG9yLkRpc3BsYXlOYW1lfSIpDQoJCQkJCQkJPC9hPg0KCQkJCQkJI2Vsc2UNCgkJCQkJCQkkY29yZV92Ml91aS5HZXRSZXNpemVkSW1hZ2VIdG1sKCRjb21tZW50LkF1dGhvci5BdmF0YXJVcmwsIDMyLCAzMiwgIiV7Ym9yZGVyPScwJywgYWx0PSRjb21tZW50LkF1dGhvci5EaXNwbGF5TmFtZX0iKQ0KCQkJCQkJI2VuZA0KCQkJCQk8L3NwYW4+DQoJCQkJCTxzcGFuIGNsYXNzPSJ1c2VyLW5hbWUiPg0KCQkJCQkJI2lmICgkY29tbWVudC5BdXRob3IuUHJvZmlsZVVybCkNCgkJCQkJCQk8YSBocmVmPSIkY29yZV92Ml9lbmNvZGluZy5IdG1sQXR0cmlidXRlRW5jb2RlKCRjb21tZW50LkF1dGhvci5Qcm9maWxlVXJsKSIgY2xhc3M9ImludGVybmFsLWxpbmsgdmlldy11c2VyLXByb2ZpbGUiPg0KCQkJCQkJCQk8c3Bhbj48L3NwYW4+JGNvbW1lbnQuQXV0aG9yLkRpc3BsYXlOYW1lDQoJCQkJCQkJPC9hPg0KCQkJCQkJI2Vsc2UNCgkJCQkJCQk8c3Bhbj48L3NwYW4+JGNvbW1lbnQuQXV0aG9yLkRpc3BsYXlOYW1lDQoJCQkJCQkjZW5kDQoJCQkJCTwvc3Bhbj4NCgkJCQk8L2Rpdj4NCgkJCQk8ZGl2IGNsYXNzPSJwb3N0LWRhdGUiPg0KCQkJCQk8c3BhbiBjbGFzcz0idmFsdWUiPiRjb3JlX3YyX2xhbmd1YWdlLkZvcm1hdERhdGVBbmRUaW1lKCRjb21tZW50LkRhdGUpPC9zcGFuPg0KCQkJCTwvZGl2Pg0KCQkJICAgIDxkaXYgY2xhc3M9InBvc3QtbW9kZXJhdGUiPg0KCQkJICAgICAgICAjaWYgKCRhY2Nlc3NpbmdVc2VySXNSZWdpc3RlcmVkKQ0KCQkJCQkJI3NldCAoJG1vZGVyYXRlT3B0aW9ucyA9ICIle30iKQ0KCQkJCQkJI2lmKCRjb3JlX3YyX25vZGVQZXJtaXNzaW9uLkdldCgibWVkaWFnYWxsZXJpZXMiLCAkZ2FsbGVyeUlkLCAiTWVkaWFHYWxsZXJ5X0RlbGV0ZUNvbW1lbnQiKS5Jc0FsbG93ZWQpDQoJCQkJCQkJI3NldCAoJERRID0gJyInKQ0KCQkJCQkJCSRtb2RlcmF0ZU9wdGlvbnMuQWRkKCdBZGRpdGlvbmFsTGlua3MnLCJbeyR7RFF9aHJlZiR7RFF9OiR7RFF9IyR7RFF9LCR7RFF9dGV4dCR7RFF9OiR7RFF9JHtjb3JlX3YyX2xhbmd1YWdlLkdldFJlc291cmNlKCdEZWxldGUnKX0ke0RRfSwke0RRfWNsYXNzTmFtZSR7RFF9OiR7RFF9ZGVsZXRlLXBvc3Qke0RRfX1dIikNCgkJCQkJCSNlbmQNCgkJCSAgICAgICAgICAgICRjb3JlX3YyX3VpLk1vZGVyYXRlKCRjb21tZW50LkNvbW1lbnRJZCwgJGNvbW1lbnQuQ29tbWVudENvbnRlbnRUeXBlSWQsICRtb2RlcmF0ZU9wdGlvbnMpDQoJCQkgICAgICAgICNlbmQNCgkJCSAgICA8L2Rpdj4NCgkJCQk8ZGl2IGNsYXNzPSJwb3N0LWNvbnRlbnQgdXNlci1kZWZpbmVkLW1hcmt1cCI+DQoJCQkJCSRjb21tZW50LkJvZHkNCgkJCQk8L2Rpdj4NCgkJCQk8ZGl2IGNsYXNzPSJwb3N0LWFjdGlvbnMiPg0KCQkJCQk8ZGl2IGNsYXNzPSJuYXZpZ2F0aW9uLWxpc3QtaGVhZGVyIj48L2Rpdj4NCgkJCQkJPHVsIGNsYXNzPSJuYXZpZ2F0aW9uLWxpc3QiPg0KCQkJCQkJPGxpIGNsYXNzPSJuYXZpZ2F0aW9uLWl0ZW0gcG9zdC1saWtlLWNvdW50Ij4NCgkJCQkJCQkjaWYgKCRhY2Nlc3NpbmdVc2VySXNSZWdpc3RlcmVkKQ0KCQkJCQkJCQkjc2V0ICgkbGlrZUZvcm1hdCA9ICd7dG9nZ2xlfSA8c3BhbiBjbGFzcz0iY291bnQiPjxzcGFuIGNsYXNzPSJsaWtlLWluZGljYXRvciBpbmxpbmUiPjwvc3Bhbj57Y291bnR9PC9zcGFuPicpDQoJCQkJCQkJI2Vsc2UNCgkJCQkJCQkJI3NldCAoJGxpa2VGb3JtYXQgPSAnPHNwYW4gY2xhc3M9ImNvdW50Ij48c3BhbiBjbGFzcz0ibGlrZS1pbmRpY2F0b3IgaW5saW5lIj48L3NwYW4+e2NvdW50fTwvc3Bhbj4nKQ0KCQkJCQkJCSNlbmQNCgkJCSAgICAgICAgICAgIAk8c3BhbiBjbGFzcz0iYXR0cmlidXRlLXZhbHVlIj4kY29yZV92Ml91aS5MaWtlKCRjb21tZW50LkNvbW1lbnRJZCwgJGNvbW1lbnQuQ29tbWVudENvbnRlbnRUeXBlSWQsICIleyBGb3JtYXQgPSAkbGlrZUZvcm1hdCB9Iik8L3NwYW4+DQoJCQkgICAgICAgICAgICA8L2xpPg0KCQkJCQk8L3VsPg0KCQkJCQk8ZGl2IGNsYXNzPSJuYXZpZ2F0aW9uLWxpc3QtZm9vdGVyIj48L2Rpdj4NCgkJCQk8L2Rpdj4NCgkJCTwvZGl2Pg0KCQkJPC9kaXY+DQoJCSNpZiAoJG1lZGlhQXV0aG9ySWQgPT0gJGNvbW1lbnQuQXV0aG9yLklkKQ0KCQkJPGRpdiBjbGFzcz0iZnVsbC1wb3N0LWZvb3RlciB1c2VyLWlzLWF1dGhvciI+DQoJCQkJPGRpdiBjbGFzcz0iciBmaWppLXIgZXZvbHV0aW9uMi1yIj48L2Rpdj4NCgkJCTwvZGl2Pg0KCQkjZWxzZQ0KCQkJPGRpdiBjbGFzcz0iZnVsbC1wb3N0LWZvb3RlciI+DQoJCQkJPGRpdiBjbGFzcz0iciBmaWppLXIgZXZvbHV0aW9uMi1yIj48L2Rpdj4NCgkJCTwvZGl2Pg0KCQkjZW5kDQoJCTwvZGl2Pg0KCTwvbGk+DQojYWZ0ZXJhbGwNCgk8L3VsPg0KCTxkaXYgY2xhc3M9ImNvbnRlbnQtbGlzdC1mb290ZXIiPjwvZGl2Pg0KI2VuZA0KDQojc2V0KCRiYXNlVXJsID0gJGNvcmVfdjJfcGFnZS5VcmwpDQojc2V0KCRiYXNlVXJsID0gJGNvcmVfdjJfcGFnZS5HZXRRdWVyeVN0cmluZ1ZhbHVlKCd3X2Jhc2VVcmwnKSkNCiQhY29yZV92Ml91aS5QYWdlcigkY29tbWVudHMuUGFnZUluZGV4LCAkY29tbWVudHMuUGFnZVNpemUsICRjb21tZW50cy5Ub3RhbENvdW50LCAiJXtUYXJnZXQ9J2NvbW1lbnRzJyxCYXNlVXJsPSRiYXNlVXJsLFBhZ2VkQ29udGVudEZpbGU9J2xvYWQudm0nLFRyYW5zaXRpb249J25vbmUnfSIpDQo=</file><file name="ui.js">alF1ZXJ5KGZ1bmN0aW9uKCQpew0KICAgIGlmICh0eXBlb2YgJC50ZWxsaWdlbnQgPT09ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgJC50ZWxsaWdlbnQgPSB7fTsNCg0KICAgIGlmICh0eXBlb2YgJC50ZWxsaWdlbnQuZXZvbHV0aW9uID09PSAndW5kZWZpbmVkJykNCiAgICAgICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uID0ge307DQoNCiAgICBpZiAodHlwZW9mICQudGVsbGlnZW50LmV2b2x1dGlvbi53aWRnZXRzID09PSAndW5kZWZpbmVkJykNCiAgICAgICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLndpZGdldHMgPSB7fTsNCg0KICAgIHZhciBfZXJyb3JIdG1sID0gJzxkaXYgY2xhc3M9Im1lc3NhZ2UgZXJyb3IiPntFcnJvclRleHR9PC9kaXY+JywNCiAgICAgICAgX2xvYWRpbmdIdG1sID0gJzxkaXYgY2xhc3M9Im1lc3NhZ2UgbG9hZGluZyI+e0xvYWRpbmdUZXh0fTwvZGl2PicsDQogICAgICAgIF9sb2FkID0gZnVuY3Rpb24oY29udGV4dCwgcmViYXNlUGFnZXIpIHsNCiAgICAgICAgICAgIHZhciBkYXRhID0geyB3X2Jhc2VVcmw6IGNvbnRleHQuYmFzZVVybCB9Ow0KICAgICAgICAgICAgaWYocmViYXNlUGFnZXIpIHsNCiAgICAgICAgICAgICAgICBkYXRhW2NvbnRleHQucGFnZUluZGV4UXVlcnlTdHJpbmdLZXldID0gMTsNCg0KICAgICAgICAgICAgICAgIHZhciBoYXNoRGF0YSA9ICQudGVsbGlnZW50LmV2b2x1dGlvbi51cmwuaGFzaERhdGEoKTsNCiAgICAgICAgICAgICAgICBoYXNoRGF0YVtjb250ZXh0LnBhZ2VJbmRleFF1ZXJ5U3RyaW5nS2V5XSA9IDE7DQogICAgICAgICAgICAgICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLnVybC5oYXNoRGF0YShoYXNoRGF0YSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBfc2V0Q29udGVudChjb250ZXh0LCBfbG9hZGluZ0h0bWwucmVwbGFjZSgve0xvYWRpbmdUZXh0fS9nLCBjb250ZXh0LmxvYWRpbmdUZXh0KSk7DQogICAgICAgICAgICAkLnRlbGxpZ2VudC5ldm9sdXRpb24uZ2V0KHsNCiAgICAgICAgICAgICAgICB1cmw6IGNvbnRleHQubG9hZENvbW1lbnRzVXJsLA0KICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsDQogICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRDb250ZW50KGNvbnRleHQsIHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgZGVmYXVsdEVycm9yTWVzc2FnZTogY29udGV4dC5lcnJvclRleHQsDQogICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgZGVzYywgZXgpIHsNCiAgICAgICAgICAgICAgICAgICAgX3NldENvbnRlbnQoY29udGV4dCwgX2Vycm9ySHRtbC5yZXBsYWNlKC97RXJyb3JUZXh0fS9nLCBkZXNjKSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIF9hdHRhY2hIYW5kbGVycyA9IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgICQoY29udGV4dC53cmFwcGVyKS5iaW5kKCdldm9sdXRpb25Nb2RlcmF0ZUxpbmtDbGlja2VkJyxmdW5jdGlvbihlKSB7DQogICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRJZCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jb250ZW50LWl0ZW0nKS5kYXRhKCdjb21tZW50aWQnKTsNCiAgICAgICAgICAgICAgICBfZGVsZXRlTWVkaWFDb21tZW50KGNvbnRleHQsIGNvbnRleHQuZ2FsbGVyeUlkLCBjb250ZXh0LmZpbGVJZCwgY29tbWVudElkLCBlKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgX3NldENvbnRlbnQgPSBmdW5jdGlvbihjb250ZXh0LCBodG1sKSB7DQogICAgICAgICAgICBjb250ZXh0LndyYXBwZXIuaHRtbChodG1sKS5jc3MoInZpc2liaWxpdHkiLCAidmlzaWJsZSIpOw0KICAgICAgICB9LA0KICAgICAgICBfZGVsZXRlTWVkaWFDb21tZW50ID0gZnVuY3Rpb24oY29udGV4dCwgZ2FsbGVyeUlkLCBmaWxlSWQsIGNvbW1lbnRJZCwgZXZlbnQpIHsNCiAgICAgICAgICAgIGlmKGNvbmZpcm0oY29udGV4dC5kZWxldGVWZXJpZmljYXRpb25UZXh0KSkgew0KICAgICAgICAgICAgICAgICQudGVsbGlnZW50LmV2b2x1dGlvbi5kZWwoew0KICAgICAgICAgICAgICAgICAgICB1cmw6ICQudGVsbGlnZW50LmV2b2x1dGlvbi5zaXRlLmdldEJhc2VVcmwoKSArICdhcGkuYXNoeC92Mi9tZWRpYS97R2FsbGVyeUlkfS9maWxlcy97RmlsZUlkfS9jb21tZW50cy97Q29tbWVudElkfS5qc29uJywNCiAgICAgICAgICAgICAgICAgICAgZGF0YTogew0KICAgICAgICAgICAgICAgICAgICAgICAgR2FsbGVyeUlkOiBnYWxsZXJ5SWQsDQogICAgICAgICAgICAgICAgICAgICAgICBGaWxlSWQ6IGZpbGVJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIENvbW1lbnRJZDogY29tbWVudElkDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9ICQoJ2FbbmFtZT1jb21tZW50LScrY29tbWVudElkKyddJywgY29udGV4dC53cmFwcGVyKS5jbG9zZXN0KCdsaS5jb250ZW50LWl0ZW0nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdJdGVtcyA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCd1bCcpLmZpbmQoJ2xpLmNvbnRlbnQtaXRlbScpOzsNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uc2xpZGVVcChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdlcmUgbm8gbW9yZSBjb21tZW50cywgaGlkZSB0aGUgY29tbWVudHMgbGlzdCBhbHRvZ2V0aGVyDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGV4dC53cmFwcGVyLmZpbmQoJ2xpJykubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQud3JhcHBlci5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2FkKGNvbnRleHQsIHJlbWFpbmluZ0l0ZW1zLmxlbmd0aCA9PT0gMSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KDQogICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLndpZGdldHMubWVkaWFHYWxsZXJ5UG9zdENvbW1lbnRMaXN0ID0gew0KICAgICAgICByZWdpc3RlcjogZnVuY3Rpb24oY29udGV4dCkgew0KICAgICAgICAgICAgX2F0dGFjaEhhbmRsZXJzKGNvbnRleHQpOw0KDQogICAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCd0ZWxsaWdlbnRfbWVkaWFnYWxsZXJpZXNfY29tbWVudHBvc3RlZCcsIGZ1bmN0aW9uKGUsIG1lc3NhZ2UpIHsNCiAgICAgICAgICAgICAgICBfbG9hZChjb250ZXh0KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfTsNCn0pOw==</file></files></scriptedContentFragment></scriptedContentFragments>